From 8e8be992feecebc5d034281f432ce78c9ce39a4c Mon Sep 17 00:00:00 2001
From: SeongJae Park <sj@kernel.org>
Date: Thu, 21 Sep 2023 09:41:45 +0000
Subject: [PATCH] Revert "kselftest/runner.sh: Propagate SIGTERM to runner
 child"

This reverts commit 9616cb34b08ec86642b162eae75c5a7ca8debe3c.

The commit makes 'stty' hungup, which is used by kunit in
damon-tests/corr.  Revert the commit as a temporal workaround for now.

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 tools/testing/selftests/kselftest/runner.sh | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/tools/testing/selftests/kselftest/runner.sh b/tools/testing/selftests/kselftest/runner.sh
index 74954f6a8f94..c0070ef649b9 100644
--- a/tools/testing/selftests/kselftest/runner.sh
+++ b/tools/testing/selftests/kselftest/runner.sh
@@ -37,8 +37,7 @@ tap_timeout()
 {
 	# Make sure tests will time out if utility is available.
 	if [ -x /usr/bin/timeout ] ; then
-		/usr/bin/timeout --foreground "$kselftest_timeout" \
-			/usr/bin/timeout "$kselftest_timeout" $1
+		/usr/bin/timeout --foreground "$kselftest_timeout" $1
 	else
 		$1
 	fi
-- 
2.39.2

