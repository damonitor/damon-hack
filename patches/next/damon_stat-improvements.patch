From: SeongJae Park <sj@kernel.org>
Date: Mon, 8 Sep 2025 18:30:15 -0700
Subject: [PATCH] ==== damon_stat improvements ====

mm/damon/stat: expose auto-tuned intervals and non-idle ages

DAMON_STAT is intentionally providing limited information for easy
consumption of the information.  From production fleet level usages,
below limitations are found, though.

The aggregation interval of DAMON_STAT represents the granularity of the
memory_idle_ms_percentiles.  But the interval is auto-tuned and not
exposed to users, so users cannot know the granularity.

All memory regions of non-zero (positive) nr_accesses are treated as
having zero idle time.  A significant portion of production systems have
such zero idle time.  Hence breakdown of warm and hot data is nearly
impossible.

Make following changes to overcome the limitations.  Expose the
auto-tuned aggregation interval with a new parameter named
aggr_interval_us.  Expose the age of non-zero nr_accesses (how long >0
access frequency the region retained) regions as a negative idle time.

Changes from RFC
(https://lore.kernel.org/20250910040022.168223-1-sj@kernel.org)
- Rebase on latest mm-new
- Wordsmith commit messages

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 hkml_cv_bogus/hkml_cv_bogus_hiv267z1 | 0
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 hkml_cv_bogus/hkml_cv_bogus_hiv267z1

diff --git a/hkml_cv_bogus/hkml_cv_bogus_hiv267z1 b/hkml_cv_bogus/hkml_cv_bogus_hiv267z1
new file mode 100644
index 000000000000..e69de29bb2d1
-- 
2.39.5

