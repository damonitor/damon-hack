From: SeongJae Park <sj@kernel.org>
Date: Sat, 31 Jan 2026 10:06:00 -0800
Subject: [PATCH] ==== damos filter fixup ====

mm/damon/core: improve DAMOS quota efficiency for core layer filters

Improve two below problematic behaviors of DAMOS that makes it less
efficient when core layer filters are used.

DAMOS generates the under-quota regions prioritization-purpose access
temperature histogram [1] with only the scheme target access pattern.
The DAMOS filters are ignored on the histogram, and this can result in
the scheme not applied to eligible regions.  For working around this,
users had to use separate DAMON contexts.  The memory tiering approaches
are such examples.

DAMOS splits regions that intersect with address filters, so that only
filtered-out part of the region is skipped.  But, the implementation is
skipping the other part of the region that is not filtered out, too.  As
a result, DAMOS can work slower than expected.

Improve the two inefficient behaviors with two patches, respectively.
Read the patches for more details about the problem and how those are
fixed.

[1] "Prioritization" section of Documentation/mm/damon/design.rst

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 hkml_cv_bogus/hkml_cv_bogus_lm14tva8 | 0
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 hkml_cv_bogus/hkml_cv_bogus_lm14tva8

diff --git a/hkml_cv_bogus/hkml_cv_bogus_lm14tva8 b/hkml_cv_bogus/hkml_cv_bogus_lm14tva8
new file mode 100644
index 0000000000000..e69de29bb2d1d
-- 
2.47.3

