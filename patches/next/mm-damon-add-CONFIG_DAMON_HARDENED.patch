From: SeongJae Park <sj@kernel.org>
Date: Sat, 3 Jan 2026 10:04:42 -0800
Subject: [PATCH] mm/damon: add CONFIG_DAMON_HARDENED

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 mm/damon/Kconfig | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/mm/damon/Kconfig b/mm/damon/Kconfig
index d5f8db812dd3..567eb86a53e3 100644
--- a/mm/damon/Kconfig
+++ b/mm/damon/Kconfig
@@ -120,4 +120,15 @@ config DAMON_ACMA
 	  min/max memory for the system and maximum memory pressure stall time
 	  ratio.
 
+config DAMON_HARDENED
+	bool "Check integrity of DAMON code"
+	depends on DAMON
+	help
+	  This enables additional DAMON debugging-purpose integrity checks in
+	  DAMON code.  This can impose additional overhead but can be useful at
+	  finding bugs.  Hence it is enouraged to enable on DAMON development
+	  setups.
+
+	  If unsure, say N.
+
 endmenu
-- 
2.47.3

