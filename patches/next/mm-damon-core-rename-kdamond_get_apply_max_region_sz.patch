From: SeongJae Park <sj@kernel.org>
Date: Sun, 15 Feb 2026 17:24:08 -0800
Subject: [PATCH] mm/damon/core: rename kdamond_get_apply_max_region_sz()

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 mm/damon/core.c             |  8 ++++----
 mm/damon/tests/core-kunit.h | 16 ++++++++--------
 2 files changed, 12 insertions(+), 12 deletions(-)

diff --git a/mm/damon/core.c b/mm/damon/core.c
index b211cd6ad937f..ddd7fef6fedbc 100644
--- a/mm/damon/core.c
+++ b/mm/damon/core.c
@@ -1596,7 +1596,7 @@ static unsigned long damon_region_sz_limit(struct damon_ctx *ctx)
 static void damon_split_region_at(struct damon_target *t,
 				  struct damon_region *r, unsigned long sz_r);
 
-static unsigned long kdamond_get_apply_max_region_sz(struct damon_ctx *ctx)
+static unsigned long damon_apply_min_nr_regions(struct damon_ctx *ctx)
 {
 	unsigned long max_region_sz = damon_region_sz_limit(ctx);
 	struct damon_target *t;
@@ -3328,7 +3328,7 @@ static int kdamond_fn(void *data)
 	if (!ctx->regions_score_histogram)
 		goto done;
 
-	sz_limit = kdamond_get_apply_max_region_sz(ctx);
+	sz_limit = damon_apply_min_nr_regions(ctx);
 
 	while (!kdamond_need_stop(ctx)) {
 		/*
@@ -3422,12 +3422,12 @@ static int kdamond_fn(void *data)
 				sample_interval;
 			if (ctx->ops.update)
 				ctx->ops.update(ctx);
-			sz_limit = kdamond_get_apply_max_region_sz(ctx);
+			sz_limit = damon_apply_min_nr_regions(ctx);
 		}
 
 		/* damon_call() callers could updated min_nr_regions */
 		if (ctx->attrs.min_nr_regions != old_min_nr_regions)
-			sz_limit = kdamond_get_apply_max_region_sz(ctx);
+			sz_limit = damon_apply_min_nr_regions(ctx);
 	}
 done:
 	damon_destroy_targets(ctx);
diff --git a/mm/damon/tests/core-kunit.h b/mm/damon/tests/core-kunit.h
index 78bca0eb2b6e0..ad43303084e85 100644
--- a/mm/damon/tests/core-kunit.h
+++ b/mm/damon/tests/core-kunit.h
@@ -1358,7 +1358,7 @@ static void damon_test_set_filters_default_reject(struct kunit *test)
 	damos_free_filter(target_filter);
 }
 
-static void damon_test_get_apply_max_region_sz_for(struct kunit *test,
+static void damon_test_apply_min_nr_regions_for(struct kunit *test,
 		unsigned long sz_regions, unsigned long min_region_sz,
 		unsigned long min_nr_regions,
 		unsigned long max_region_sz_expect,
@@ -1387,7 +1387,7 @@ static void damon_test_get_apply_max_region_sz_for(struct kunit *test,
 
 	ctx->min_region_sz = min_region_sz;
 	ctx->attrs.min_nr_regions = min_nr_regions;
-	max_region_size = kdamond_get_apply_max_region_sz(ctx);
+	max_region_size = damon_apply_min_nr_regions(ctx);
 
 	KUNIT_EXPECT_EQ(test, max_region_size, max_region_sz_expect);
 	KUNIT_EXPECT_EQ(test, damon_nr_regions(t), nr_regions_expect);
@@ -1395,18 +1395,18 @@ static void damon_test_get_apply_max_region_sz_for(struct kunit *test,
 	damon_destroy_ctx(ctx);
 }
 
-static void damon_test_get_apply_max_region_sz(struct kunit *test)
+static void damon_test_apply_min_nr_regions(struct kunit *test)
 {
 	/* common, expected setup */
-	damon_test_get_apply_max_region_sz_for(test, 10, 1, 10, 1, 10);
+	damon_test_apply_min_nr_regions_for(test, 10, 1, 10, 1, 10);
 	/* no zero size limit */
-	damon_test_get_apply_max_region_sz_for(test, 10, 1, 15, 1, 10);
+	damon_test_apply_min_nr_regions_for(test, 10, 1, 15, 1, 10);
 	/* max size should be aligned by min_region_sz */
-	damon_test_get_apply_max_region_sz_for(test, 10, 2, 2, 6, 2);
+	damon_test_apply_min_nr_regions_for(test, 10, 2, 2, 6, 2);
 	/*
 	 * when min_nr_regions and min_region_sz conflicts, min_region_sz wins.
 	 */
-	damon_test_get_apply_max_region_sz_for(test, 10, 2, 10, 2, 5);
+	damon_test_apply_min_nr_regions_for(test, 10, 2, 10, 2, 5);
 }
 
 static void damon_test_is_last_region(struct kunit *test)
@@ -1458,7 +1458,7 @@ static struct kunit_case damon_test_cases[] = {
 	KUNIT_CASE(damos_test_filter_out),
 	KUNIT_CASE(damon_test_feed_loop_next_input),
 	KUNIT_CASE(damon_test_set_filters_default_reject),
-	KUNIT_CASE(damon_test_get_apply_max_region_sz),
+	KUNIT_CASE(damon_test_apply_min_nr_regions),
 	KUNIT_CASE(damon_test_is_last_region),
 	{},
 };
-- 
2.47.3

