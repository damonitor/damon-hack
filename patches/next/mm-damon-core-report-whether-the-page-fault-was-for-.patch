From: SeongJae Park <sj@kernel.org>
Date: Tue, 2 Dec 2025 22:32:57 -0800
Subject: [PATCH] mm/damon/core: report whether the page fault was for writing

The page fault event reporting function can know if the access was for
writing or reading.  Add the information to the report.

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 mm/damon/core.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/mm/damon/core.c b/mm/damon/core.c
index 4177bf5c873be..423514500ccc6 100644
--- a/mm/damon/core.c
+++ b/mm/damon/core.c
@@ -1780,6 +1780,7 @@ void damon_report_page_fault(struct vm_fault *vmf, bool huge_pmd)
 		.size = 1,	/* todo: set appripriately */
 		.cpu = smp_processor_id(),
 		.tid = task_pid_vnr(current),
+		.is_write = vmf->flags & FAULT_FLAG_WRITE,
 	};
 
 	if (huge_pmd)
-- 
2.47.3

