From: SeongJae Park <sj@kernel.org>
Date: Sat, 26 Jul 2025 10:56:44 -0700
Subject: [PATCH] mm/damon: drop DAMON_PADDR_FAULT_TESTING

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 include/linux/damon.h | 2 --
 mm/mprotect.c         | 4 ----
 2 files changed, 6 deletions(-)

diff --git a/include/linux/damon.h b/include/linux/damon.h
index 90bc4819db56..20d978500abd 100644
--- a/include/linux/damon.h
+++ b/include/linux/damon.h
@@ -14,8 +14,6 @@
 #include <linux/types.h>
 #include <linux/random.h>
 
-#define DAMON_PADDR_FAULT_TESTING 0
-
 /* Minimal region size.  Every damon_region is aligned by this. */
 #define DAMON_MIN_REGION	PAGE_SIZE
 /* Max priority score for DAMON-based operation schemes */
diff --git a/mm/mprotect.c b/mm/mprotect.c
index 1b5f5e08acde..1a844b497b5c 100644
--- a/mm/mprotect.c
+++ b/mm/mprotect.c
@@ -130,10 +130,6 @@ static bool prot_numa_skip(struct vm_area_struct *vma, unsigned long addr,
 	bool toptier;
 	int nid;
 
-#if DAMON_PADDR_FAULT_TESTING != 0
-	return false;
-#endif
-
 	/* Avoid TLB flush if possible */
 	if (pte_protnone(oldpte))
 		goto skip;
-- 
2.39.5

