From: SeongJae Park <sj@kernel.org>
Date: Sat, 29 Nov 2025 13:35:08 -0800
Subject: [PATCH] mm/damon: embed nr_tids and tid_arr of report filter as a
 struct

Otherwise, they overwrite each other.

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 include/linux/damon.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/include/linux/damon.h b/include/linux/damon.h
index 0bc0fdb9bb3f..32ade8fa8ebd 100644
--- a/include/linux/damon.h
+++ b/include/linux/damon.h
@@ -840,8 +840,10 @@ struct damon_report_filter {
 	bool allow;
 	union {
 		cpumask_t cpumask;
-		pid_t *tid_arr;
-		int nr_tids;
+		struct {
+			pid_t *tid_arr;
+			int nr_tids;
+		};
 	};
 	struct list_head list;
 };
-- 
2.47.3

