From: SeongJae Park <sj@kernel.org>
Date: Sat, 2 Aug 2025 10:47:39 -0700
Subject: [PATCH] mm/damon/paddr: remove paddr_fault

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 include/linux/damon.h |  1 -
 mm/damon/paddr.c      | 17 +----------------
 mm/damon/sysfs.c      |  4 ----
 3 files changed, 1 insertion(+), 21 deletions(-)

diff --git a/include/linux/damon.h b/include/linux/damon.h
index 1742f585d1e3..9283a0baa20d 100644
--- a/include/linux/damon.h
+++ b/include/linux/damon.h
@@ -582,7 +582,6 @@ enum damon_ops_id {
 	DAMON_OPS_VADDR,
 	DAMON_OPS_FVADDR,
 	DAMON_OPS_PADDR,
-	DAMON_OPS_PADDR_FAULT,
 	NR_DAMON_OPS,
 };
 
diff --git a/mm/damon/paddr.c b/mm/damon/paddr.c
index 8e40d5bcc48b..21271bd99cf7 100644
--- a/mm/damon/paddr.c
+++ b/mm/damon/paddr.c
@@ -443,23 +443,8 @@ static int __init damon_pa_initcall(void)
 		.apply_scheme = damon_pa_apply_scheme,
 		.get_scheme_score = damon_pa_scheme_score,
 	};
-	struct damon_operations fault_ops = {
-		.id = DAMON_OPS_PADDR_FAULT,
-		.init = NULL,
-		.update = NULL,
-		.prepare_access_checks = damon_pa_fault_prepare_access_checks,
-		.check_accesses = NULL,
-		.target_valid = NULL,
-		.cleanup = NULL,
-		.apply_scheme = damon_pa_apply_scheme,
-		.get_scheme_score = damon_pa_scheme_score,
-	};
-	int err;
 
-	err = damon_register_ops(&ops);
-	if (err)
-		return err;
-	return damon_register_ops(&fault_ops);
+	return damon_register_ops(&ops);
 };
 
 subsys_initcall(damon_pa_initcall);
diff --git a/mm/damon/sysfs.c b/mm/damon/sysfs.c
index b304bd496f2f..fe4e73d0ebbb 100644
--- a/mm/damon/sysfs.c
+++ b/mm/damon/sysfs.c
@@ -829,10 +829,6 @@ static const struct damon_sysfs_ops_name damon_sysfs_ops_names[] = {
 		.ops_id = DAMON_OPS_PADDR,
 		.name = "paddr",
 	},
-	{
-		.ops_id = DAMON_OPS_PADDR_FAULT,
-		.name = "paddr_fault",
-	},
 };
 
 struct damon_sysfs_context {
-- 
2.39.5

