From: SeongJae Park <sj@kernel.org>
Date: Tue, 22 Jul 2025 21:49:51 -0700
Subject: [PATCH] mm/damon/paddr_fault: change protection in page granularity

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 mm/damon/paddr.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/mm/damon/paddr.c b/mm/damon/paddr.c
index adb9fdc9ece3..18cb2edf3344 100644
--- a/mm/damon/paddr.c
+++ b/mm/damon/paddr.c
@@ -110,7 +110,7 @@ static bool damon_pa_fault_change_protection_one(struct folio *folio,
 	tlb_gather_mmu(&tlb, vma->vm_mm);
 
 	/* TODO: define and use MM_CP_PROT_DAMON */
-	change_protection(&tlb, vma, addr, addr + 1, MM_CP_PROT_NUMA);
+	change_protection(&tlb, vma, addr, addr + PAGE_SIZE, MM_CP_PROT_NUMA);
 
 	tlb_finish_mmu(&tlb);
 	return true;
-- 
2.39.5

