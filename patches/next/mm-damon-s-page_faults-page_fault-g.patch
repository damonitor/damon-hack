From: SeongJae Park <sj@kernel.org>
Date: Sun, 30 Nov 2025 11:11:54 -0800
Subject: [PATCH] mm/damon: s/page_faults/page_fault/g

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 Documentation/admin-guide/mm/damon/usage.rst |  2 +-
 include/linux/damon.h                        |  4 ++--
 mm/damon/core.c                              |  4 ++--
 mm/damon/paddr.c                             |  2 +-
 mm/damon/sysfs.c                             | 24 ++++++++++----------
 5 files changed, 18 insertions(+), 18 deletions(-)

diff --git a/Documentation/admin-guide/mm/damon/usage.rst b/Documentation/admin-guide/mm/damon/usage.rst
index 1033c1e66948..26735e02d4c5 100644
--- a/Documentation/admin-guide/mm/damon/usage.rst
+++ b/Documentation/admin-guide/mm/damon/usage.rst
@@ -65,7 +65,7 @@ comma (",").
     │ │ │ │ │ :ref:`monitoring_attrs <sysfs_monitoring_attrs>`/
     │ │ │ │ │ │ intervals/sample_us,aggr_us,update_us
     │ │ │ │ │ │ │ intervals_goal/access_bp,aggrs,min_sample_us,max_sample_us
-    │ │ │ │ │ │ sample/primitives/page_table,page_faults
+    │ │ │ │ │ │ sample/primitives/page_table,page_fault
     │ │ │ │ │ │ sample/filters/nr_filters
     │ │ │ │ │ │ │ 0/matching,allow,cpu_id,pid,memcg_path,write,
     │ │ │ │ │ │ nr_regions/min,max
diff --git a/include/linux/damon.h b/include/linux/damon.h
index 994fead665f5..87ced62d7318 100644
--- a/include/linux/damon.h
+++ b/include/linux/damon.h
@@ -838,11 +838,11 @@ struct damon_attrs {
 /**
  * struct damon_primitives_enabled - Enablement of DAMON primitives.
  * @page_table:		Page table accessed bit scanning.
- * @page_faults:	Page faults monitoring.
+ * @page_fault:	Page faults monitoring.
  */
 struct damon_primitives_enabled {
 	bool page_table;
-	bool page_faults;
+	bool page_fault;
 };
 
 /**
diff --git a/mm/damon/core.c b/mm/damon/core.c
index 344d2408439c..c8a34f5c1ae5 100644
--- a/mm/damon/core.c
+++ b/mm/damon/core.c
@@ -1427,7 +1427,7 @@ static int damon_commit_sample_filters(struct damon_sample_control *dst,
 static bool damon_primitives_enabled_invalid(
 		struct damon_primitives_enabled *config)
 {
-	return config->page_table == config->page_faults;
+	return config->page_table == config->page_fault;
 }
 
 static int damon_commit_sample_control(
@@ -3135,7 +3135,7 @@ static int kdamond_fn(void *data)
 		ctx->passed_sample_intervals++;
 
 		/* todo: make these non-exclusive */
-		if (ctx->sample_control.primitives_enabled.page_faults)
+		if (ctx->sample_control.primitives_enabled.page_fault)
 			max_nr_accesses = kdamond_check_reported_accesses(ctx);
 		else if (ctx->ops.check_accesses)
 			max_nr_accesses = ctx->ops.check_accesses(ctx);
diff --git a/mm/damon/paddr.c b/mm/damon/paddr.c
index 957ef65b262f..2da102360734 100644
--- a/mm/damon/paddr.c
+++ b/mm/damon/paddr.c
@@ -127,7 +127,7 @@ static void damon_pa_prepare_access_checks(struct damon_ctx *ctx)
 {
 	if (ctx->sample_control.primitives_enabled.page_table)
 		damon_pa_prepare_access_checks_abit(ctx);
-	if (ctx->sample_control.primitives_enabled.page_faults)
+	if (ctx->sample_control.primitives_enabled.page_fault)
 		damon_pa_prepare_access_checks_faults(ctx);
 }
 
diff --git a/mm/damon/sysfs.c b/mm/damon/sysfs.c
index a5d2caf103a8..0cdd22aab708 100644
--- a/mm/damon/sysfs.c
+++ b/mm/damon/sysfs.c
@@ -1103,11 +1103,11 @@ static const struct kobj_type damon_sysfs_sample_filters_ktype = {
 struct damon_sysfs_primitives {
 	struct kobject kobj;
 	bool page_table;
-	bool page_faults;
+	bool page_fault;
 };
 
 static struct damon_sysfs_primitives *damon_sysfs_primitives_alloc(
-		bool page_table, bool page_faults)
+		bool page_table, bool page_fault)
 {
 	struct damon_sysfs_primitives *primitives = kmalloc(
 			sizeof(*primitives), GFP_KERNEL);
@@ -1117,7 +1117,7 @@ static struct damon_sysfs_primitives *damon_sysfs_primitives_alloc(
 
 	primitives->kobj = (struct kobject){};
 	primitives->page_table = page_table;
-	primitives->page_faults = page_faults;
+	primitives->page_fault = page_fault;
 	return primitives;
 }
 
@@ -1144,16 +1144,16 @@ static ssize_t page_table_store(struct kobject *kobj,
 	return count;
 }
 
-static ssize_t page_faults_show(struct kobject *kobj,
+static ssize_t page_fault_show(struct kobject *kobj,
 		struct kobj_attribute *attr, char *buf)
 {
 	struct damon_sysfs_primitives *primitives = container_of(kobj,
 			struct damon_sysfs_primitives, kobj);
 
-	return sysfs_emit(buf, "%c\n", primitives->page_faults ? 'Y' : 'N');
+	return sysfs_emit(buf, "%c\n", primitives->page_fault ? 'Y' : 'N');
 }
 
-static ssize_t page_faults_store(struct kobject *kobj,
+static ssize_t page_fault_store(struct kobject *kobj,
 		struct kobj_attribute *attr, const char *buf, size_t count)
 {
 	struct damon_sysfs_primitives *primitives = container_of(kobj,
@@ -1163,7 +1163,7 @@ static ssize_t page_faults_store(struct kobject *kobj,
 
 	if (err)
 		return err;
-	primitives->page_faults = enable;
+	primitives->page_fault = enable;
 	return count;
 }
 
@@ -1178,12 +1178,12 @@ static void damon_sysfs_primitives_release(struct kobject *kobj)
 static struct kobj_attribute damon_sysfs_primitives_page_table_attr =
 		__ATTR_RW_MODE(page_table, 0600);
 
-static struct kobj_attribute damon_sysfs_primitives_page_faults_attr =
-		__ATTR_RW_MODE(page_faults, 0600);
+static struct kobj_attribute damon_sysfs_primitives_page_fault_attr =
+		__ATTR_RW_MODE(page_fault, 0600);
 
 static struct attribute *damon_sysfs_primitives_attrs[] = {
 	&damon_sysfs_primitives_page_table_attr.attr,
-	&damon_sysfs_primitives_page_faults_attr.attr,
+	&damon_sysfs_primitives_page_fault_attr.attr,
 	NULL,
 };
 ATTRIBUTE_GROUPS(damon_sysfs_primitives);
@@ -2265,8 +2265,8 @@ static int damon_sysfs_set_sample_control(
 {
 	control->primitives_enabled.page_table =
 		sysfs_sample->primitives->page_table;
-	control->primitives_enabled.page_faults =
-		sysfs_sample->primitives->page_faults;
+	control->primitives_enabled.page_fault =
+		sysfs_sample->primitives->page_fault;
 
 	return damon_sysfs_set_sample_filters(control,
 			sysfs_sample->filters);
-- 
2.47.3

