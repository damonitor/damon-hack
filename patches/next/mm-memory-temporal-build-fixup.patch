From 115208d65d45fa6c8187eb2e9482819ffa60a9f0 Mon Sep 17 00:00:00 2001
From: SeongJae Park <sj@kernel.org>
Date: Sat, 10 Aug 2024 11:48:07 -0700
Subject: [PATCH] mm/memory: temporal build fixup

Link: https://lore.kernel.org/202408102136.3slnnqT9-lkp@intel.com
Signed-off-by: SeongJae Park <sj@kernel.org>
---
 mm/memory.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/mm/memory.c b/mm/memory.c
index 231c7b2297bd..4dd734295650 100644
--- a/mm/memory.c
+++ b/mm/memory.c
@@ -5399,12 +5399,14 @@ int numa_migrate_check(struct folio *folio, struct vm_fault *vmf,
 	/* Record the current PID acceesing VMA */
 	vma_set_access_pid_bit(vma);
 
+#ifdef CONFIG_NUMA_BALANCING
 	count_vm_numa_event(NUMA_HINT_FAULTS);
 	count_memcg_folio_events(folio, NUMA_HINT_FAULTS, 1);
 	if (folio_nid(folio) == numa_node_id()) {
 		count_vm_numa_event(NUMA_HINT_FAULTS_LOCAL);
 		*flags |= TNF_FAULT_LOCAL;
 	}
+#endif
 
 	return mpol_misplaced(folio, vmf, addr);
 }
-- 
2.39.2

