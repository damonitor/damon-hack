From f312198ce21ab51ecb2ad8b53c7700b25156bfa0 Mon Sep 17 00:00:00 2001
From: SeongJae Park <sj@kernel.org>
Date: Sat, 10 Aug 2024 11:48:07 -0700
Subject: [PATCH] mm/memory: temporal build fixup

Link: https://lore.kernel.org/202408102136.3slnnqT9-lkp@intel.com
Signed-off-by: SeongJae Park <sj@kernel.org>
---
 mm/memory.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/mm/memory.c b/mm/memory.c
index 4c89cb1cb73e..909afc3ee0d4 100644
--- a/mm/memory.c
+++ b/mm/memory.c
@@ -5241,6 +5241,7 @@ int numa_migrate_check(struct folio *folio, struct vm_fault *vmf,
 	/* Record the current PID acceesing VMA */
 	vma_set_access_pid_bit(vma);
 
+#ifdef CONFIG_NUMA_BALANCING
 	count_vm_numa_event(NUMA_HINT_FAULTS);
 #ifdef CONFIG_NUMA_BALANCING
 	count_memcg_folio_events(folio, NUMA_HINT_FAULTS, 1);
@@ -5249,6 +5250,7 @@ int numa_migrate_check(struct folio *folio, struct vm_fault *vmf,
 		count_vm_numa_event(NUMA_HINT_FAULTS_LOCAL);
 		*flags |= TNF_FAULT_LOCAL;
 	}
+#endif
 
 	return mpol_misplaced(folio, vmf, addr);
 }
-- 
2.39.2

