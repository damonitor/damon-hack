From 4812e0ad5808ccaf304f8563ed5ae7571d45bf0a Mon Sep 17 00:00:00 2001
From: SeongJae Park <sj@kernel.org>
Date: Sat, 11 May 2024 11:33:21 -0700
Subject: [PATCH] patch 6: address comment

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 include/linux/damon.h | 2 +-
 mm/damon/paddr.c      | 4 ----
 2 files changed, 1 insertion(+), 5 deletions(-)

diff --git a/include/linux/damon.h b/include/linux/damon.h
index 04f435f3a9a3..3d62d98d6359 100644
--- a/include/linux/damon.h
+++ b/include/linux/damon.h
@@ -105,7 +105,7 @@ struct damon_target {
  * @DAMOS_NOHUGEPAGE:	Call ``madvise()`` for the region with MADV_NOHUGEPAGE.
  * @DAMOS_LRU_PRIO:	Prioritize the region on its LRU lists.
  * @DAMOS_LRU_DEPRIO:	Deprioritize the region on its LRU lists.
- * @DAMOS_MIGRATE_HOT:  Migrate for the given hot region.
+ * @DAMOS_MIGRATE_HOT:  Migrate the regions prioritizing warmer regions.
  * @DAMOS_MIGRATE_COLD:	Migrate the regions prioritizing colder regions.
  * @DAMOS_STAT:		Do nothing but count the stat.
  * @NR_DAMOS_ACTIONS:	Total number of DAMOS actions
diff --git a/mm/damon/paddr.c b/mm/damon/paddr.c
index b44981a9e552..7903d346c7d8 100644
--- a/mm/damon/paddr.c
+++ b/mm/damon/paddr.c
@@ -401,10 +401,6 @@ static unsigned long damon_pa_migrate(struct damon_region *r, struct damos *s,
 		if (damos_pa_filter_out(s, folio))
 			goto put_folio;
 
-		if (mm != MIG_MIGRATE_HOT) {
-			folio_clear_referenced(folio);
-			folio_test_clear_young(folio);
-		}
 		if (!folio_isolate_lru(folio))
 			goto put_folio;
 		/*
-- 
2.39.2

