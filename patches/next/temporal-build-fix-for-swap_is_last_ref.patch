From: SeongJae Park <sj@kernel.org>
Date: Wed, 9 Apr 2025 10:07:20 -0700
Subject: [PATCH] temporal build fix for swap_is_last_ref()

Detail: https://lore.kernel.org/20250409165452.305371-1-sj@kernel.org

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 mm/swapfile.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/mm/swapfile.c b/mm/swapfile.c
index b8e4c1e84a24..5989342bdbd3 100644
--- a/mm/swapfile.c
+++ b/mm/swapfile.c
@@ -1545,6 +1545,8 @@ static inline bool swap_is_last_ref(unsigned char count)
 	return (count == SWAP_HAS_CACHE) || (count == 1) ||
 	       (count == SWAP_MAP_SHMEM);
 }
+#else
+#define swap_is_last_ref(count) (false)
 #endif
 
 static void swap_entries_free(struct swap_info_struct *si,
-- 
2.39.5

