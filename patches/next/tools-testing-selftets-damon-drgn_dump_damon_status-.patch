From: SeongJae Park <sj@kernel.org>
Date: Sat, 21 Jun 2025 13:17:41 -0700
Subject: [PATCH] tools/testing/selftets/damon/drgn_dump_damon_status: update
 for drgn 0.0.22

Signed-off-by: SeongJae Park <sj@kernel.org>
---
 tools/testing/selftests/damon/drgn_dump_damon_status.py | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/tools/testing/selftests/damon/drgn_dump_damon_status.py b/tools/testing/selftests/damon/drgn_dump_damon_status.py
index 7bdb8002feb6..9bb15b0c276b 100755
--- a/tools/testing/selftests/damon/drgn_dump_damon_status.py
+++ b/tools/testing/selftests/damon/drgn_dump_damon_status.py
@@ -5,7 +5,7 @@
 Read DAMON context data and dump as a json string.
 '''
 import drgn
-from drgn import FaultError, NULL, Object, alignof, cast, container_of, execscript, implicit_convert, offsetof, reinterpret, sizeof, stack_trace
+from drgn import FaultError, NULL, Object, cast, container_of, execscript, offsetof, reinterpret, sizeof
 from drgn.helpers.common import *
 from drgn.helpers.linux import *
 
@@ -146,7 +146,8 @@ def main():
 
     pid = int(sys.argv[1])
 
-    kthread_data = cast('struct kthread *', find_task(pid).worker_private).data
+    kthread_data = cast('struct kthread *',
+                        find_task(prog, pid).worker_private).data
     ctx = cast('struct damon_ctx *', kthread_data)
     print(json.dumps({
         'contexts': [damon_ctx_to_dict(ctx)]}, indent=4))
-- 
2.39.5

