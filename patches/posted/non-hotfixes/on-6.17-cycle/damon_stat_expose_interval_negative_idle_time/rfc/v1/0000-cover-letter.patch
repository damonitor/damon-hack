From hackermail Thu Jan  1 00:00:00 1970
From: SeongJae Park <sj@kernel.org>
Cc: Andrew Morton <akpm@linux-foundation.org>
Cc: SeongJae Park <sj@kernel.org>
Cc: damon@lists.linux.dev
Cc: kernel-team@meta.com
Cc: linux-kernel@vger.kernel.org
Cc: linux-mm@kvack.org
Date: Tue, 9 Sep 2025 20:59:34 -0700
Subject: [RFC PATCH 0/2] mm/damon/stat: expose auto-tuned intervals and non-idle ages

DAMON_STAT is intentionally providing limited information for easy
consumption.  From production fleet level usages, below limitations are
found, though.

The aggregation interval of DAMON_STAT represents the granularity of the
memory_idle_ms_percentiles.  But it is auto-tuned and not exposed to
users, so users cannot know the granularity.

All memory regions of non-zero (positive) nr_accesses are treated as
having zero idle time.  A significant portion of production systems have
such zero idle time.  Hence breakdown of warm and hot data is
impossible.

To overcome the limitations, expose the auto-tuned aggregation interval
with a new parameter named xxx and the age of non-zero nr_accesses
regions as negative idle time, via the existing idle time percentiles
parameter.

SeongJae Park (2):
  mm/damon/stat: expose the current tuned aggregation interval
  mm/damon/stat: expose negative idle time

 mm/damon/stat.c | 16 +++++++++++-----
 1 file changed, 11 insertions(+), 5 deletions(-)


base-commit: adc22cc8eb821b7d8274403ad7bdafb411fcc9d7
-- 
2.39.5
