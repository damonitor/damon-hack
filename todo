TODOs
=====

WIP
---


Planning / Considering
----------------------

- Add __counted_by() annotation when ready
  (https://lore.kernel.org/r/CAKwvOdkvGTGiWzqEFq=kzqvxSYP5vUj3g9Z-=MZSQROzzSa_dg@mail.gmail.com)
- Make 'age' counted by sample_interval rather than aggregation interval
- Self feedback based DAMOS tuning
- CPU time quota for DAMON monitirng
- onetime callback
  - manually setting callback function pointers looks dangeraous.  Provide more
    decent interface, like register/unregister_damon_callback, and one time
    callback like call_rcu()
- Setting resolution of damos tried_regions
  - Should be able to control the directories population overhead when the
    number of regions is big
- DAMON_WSS: Yet another DAMON module for WSS monitoring with ro/wo/rw
- rename nr_accesses/moving_accesses_bp
- mark nr_accesses as private
- use a dedicated struct for access rate
- let kdamond name be user-defined
- let DAMON modules share one kdamond
- unify DAMON modules
- write-only monitoring
  There is a patch doing the work already: https://lore.kernel.org/lkml/20220203131237.298090-1-pedrodemargomes@gmail.com/
  Need to wait until soft-dirty bugs are fixed, though.
- support multiple contexts per kdamond


Just ideas
----------

Off the top of the head during LSFMM
------------------------------------

- DAMON-based VMA split/merge
  - Help big VMA contention issue?
  - We can further expose the monitoring results via vma name
  - Reading results becomes very easy


Off the top of the head during LPC
----------------------------------

- Contig memory access util monitoring
- WSS/RSS based processes sorting
- LRU-based monitoring ops

misc
----


- rename damon_sysfs_scheme to damos_sysfs
- automatic paddr regions detection
  (handle hot(un)plugged memory regions)

- Fixed granularity idleness monitoring
  - Must be useful for further DAMON overhead/accuracy evaluation

- DAMON-based THP hinting

- Improve regions-based monitoring quality

- Support cgroups


[1] https://lore.kernel.org/all/a2fb10bd-b44a-350e-f693-82ecfa6f54a8@huawei.com/


----

By Categorization
-----------------

DAMON Improvement
 - page-gran monitoring
 - accuracy improvement
 - more address spaces: read/write, numa, cgroups, files
 - intuitive overhead unit (CPU time quota instead of nr_{min,max}_regions)

DAMOS Improvement
 - more actions: THP, NUMA migration, ...
 - denylist
 - autotuning: feedback sysfs file accepting values and special keywords
   - writing big value makes the scheme more aggressive and vice versa
   - writing PSI_TMO makes it works like DAMON-based TMO

For Better Profiling

For Ultimate User-driven Optimization

For Access-aware Linux Tuning Assistant
